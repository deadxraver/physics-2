<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="">
<head>
    <meta charset="utf-8"/>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-3326007-19"></script>

    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());
        gtag('config', 'UA-3326007-19');
    </script>

    <script data-ad-client="ca-pub-0121577198857509" async="async"
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <link rel="stylesheet" type="text/css" href="./_ejs_library/css/ejss.css"/>

    <script type='text/javascript'>
        let gOldOnError = window.onerror;
        window.onerror = function myErrorHandler(errorMsg, url, lineNumber) {
            console.log(errorMsg + " (at " + url.toString() + " => line:" + lineNumber + ")");
            if (gOldOnError) return gOldOnError(errorMsg, url, lineNumber);
            return false;
        }
    </script>
    <script src="./_ejs_library/scripts/textresizedetector.js"></script>
    <script src="./_ejs_library/ejsS.v1.min.js"></script>
    <script type="text/javascript">

        function _simulation(_topFrame, _libraryPath, _codebasePath, _inputParameters) {

            const _model = EJSS_CORE.createAnimationLMS();
            let _view;
            let _isPlaying = false;
            let _isPaused = true;

            function _play() {
                _isPaused = false;
                _isPlaying = true;
                _model.play();
            }

            function _pause() {
                _isPaused = true;
                _isPlaying = false;
                _model.pause();
            }

            function _step() {
                _pause();
                _model.step();
            }

            function _reset() {
                _model.reset();
                _isPaused = _model.isPaused();
                _isPlaying = _model.isPlaying();
            }

            _model._play = _play;
            _model._pause = _pause;
            _model._step = _step;
            _model._reset = _reset;

            function _resetSolvers() {
                if (_model.resetSolvers) _model.resetSolvers();
            }

            const __pagesEnabled = [];

            let t;
            let x;
            let y;
            let phi;
            let omega;
            let acc;

            let color;
            let xDrag;
            let yDrag;
            let qGreen;
            let qRed;

            let font;
            let fontb;

            _model._userSerialize = function () {
                return {
                    t: t,
                    x: x,
                    y: y,
                    phi: phi,
                    omega: omega,
                    acc: acc,
                    color: color,
                    xDrag: xDrag,
                    yDrag: yDrag,
                    qGreen: qGreen,
                    qRed: qRed,
                    font: font,
                    fontb: fontb
                };
            }
            _model._userSerializePublic = function () {
                return {
                    t: t,
                    x: x,
                    y: y,
                    phi: phi,
                    omega: omega,
                    acc: acc,
                    color: color,
                    xDrag: xDrag,
                    yDrag: yDrag,
                    qGreen: qGreen,
                    qRed: qRed,
                    font: font,
                    fontb: fontb
                };
            }

            _model._readParameters = function (json) {
                if (typeof json.t != 'undefined') t = json.t;
                if (typeof json.x != 'undefined') x = json.x;
                if (typeof json.y != 'undefined') y = json.y;
                if (typeof json.phi != 'undefined') phi = json.phi;
                if (typeof json.omega != 'undefined') omega = json.omega;
                if (typeof json.acc != 'undefined') acc = json.acc;
                if (typeof json.color != 'undefined') color = json.color;
                if (typeof json.xDrag != 'undefined') xDrag = json.xDrag;
                if (typeof json.yDrag != 'undefined') yDrag = json.yDrag;
                if (typeof json.qGreen != 'undefined') qGreen = json.qGreen;
                if (typeof json.qRed != 'undefined') qRed = json.qRed;
                if (typeof json.font != 'undefined') font = json.font;
                if (typeof json.fontb != 'undefined') fontb = json.fontb;
            }

            _model._readParametersPublic = function (json) {
                if (typeof json.t != 'undefined') t = json.t;
                if (typeof json.x != 'undefined') x = json.x;
                if (typeof json.y != 'undefined') y = json.y;
                if (typeof json.phi != 'undefined') phi = json.phi;
                if (typeof json.omega != 'undefined') omega = json.omega;
                if (typeof json.acc != 'undefined') acc = json.acc;
                if (typeof json.color != 'undefined') color = json.color;
                if (typeof json.xDrag != 'undefined') xDrag = json.xDrag;
                if (typeof json.yDrag != 'undefined') yDrag = json.yDrag;
                if (typeof json.qGreen != 'undefined') qGreen = json.qGreen;
                if (typeof json.qRed != 'undefined') qRed = json.qRed;
                if (typeof json.font != 'undefined') font = json.font;
                if (typeof json.fontb != 'undefined') fontb = json.fontb;
            }

            _model._userUnserializePublic = function (json) {
                _model._readParametersPublic(json);
                _resetSolvers();
                _model.update();
            }

            _model._userUnserialize = function (json) {
                _model._readParameters(json);
                _resetSolvers();
                _model.update();
            }

            var _privateOdesList;
            var _ODEi_evolution1;
            var _userEvents1 = [];

            _model.getOdes = function () {
                return [_ODEi_evolution1];
            }

            _model.removeEvents = function () {
                _userEvents1 = [];
            }

            _model.addToReset(function () {
                __pagesEnabled['Init Page'] = true;
                __pagesEnabled['Evol Page'] = true;
                __pagesEnabled['FixRel Page'] = true;
            });

            _model.addToReset(function () {
                t = 0;
                x = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        x[_i0] = 0;
                    }
                }());
                y = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        y[_i0] = 0;
                    }
                }());
                phi = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        phi[_i0] = 0;
                    }
                }());
                omega = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        omega[_i0] = 0;
                    }
                }());
                acc = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        acc[_i0] = 0;
                    }
                }());
            });

            _model.addToReset(function () { // Reset of Constant
                color = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        color[_i0] = 0;
                    }
                }());
                xDrag = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        xDrag[_i0] = 0;
                    }
                }());
                yDrag = new Array(2);
                (function () {
                    let _i0;
                    for (_i0 = 0; _i0 < 2; _i0 += 1) {
                        yDrag[_i0] = 0;
                    }
                }());
                qGreen = 1;
                qRed = 0.5;
            });

            _model.addToReset(function () {
                font = "monospace normal 2vw ";
                fontb = "normal bold 2vw";
            });

            if (_inputParameters) {
                _inputParameters = _model.parseInputParameters(_inputParameters);
                if (_inputParameters) _model.addToReset(function () {
                    _model._readParameters(_inputParameters);
                });
            }

            _model.addToReset(function () {
                _privateOdesList = [];
                _ODEi_evolution1 = _ODE_evolution1();
                _privateOdesList.push(_ODEi_evolution1);
            });

            _model.addToReset(function () {
                _model.setAutoplay(true);
                _model.setPauseOnPageExit(false);
                _model.setFPS(25);
                _model.setStepsPerDisplay(1);
            });

            function newPosition() {
                for (var j = 0; j < 2; j++) {
                    phi[j] = Math.atan2(yDrag[j], xDrag[j]);
                    t = 0;
                    omega[j] = 0;
                }
            }

            function toggleFullScreen() {
                if (!document.fullscreenElement &&
                    !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
                    if (document.documentElement.requestFullscreen) {
                        document.documentElement.requestFullscreen();
                    } else if (document.documentElement.msRequestFullscreen) {
                        document.documentElement.msRequestFullscreen();
                    } else if (document.documentElement.mozRequestFullScreen) {
                        document.documentElement.mozRequestFullScreen();
                    } else if (document.documentElement.webkitRequestFullscreen) {
                        document.documentElement.webkitRequestFullscreen();
                    }
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    }
                }
            }

            _model.addToInitialization(function () {
                if (!__pagesEnabled['Init Page']) return;
                phi[0] = -1;
                phi[1] = -2;
                color[0] = "#6A11CBFF";
                color[1] = "#f72cfe";
                for (var j = 0; j < 2; j++) {
                    x[j] = Math.cos(phi[j]);
                    y[j] =
                        xDrag[j] = x[j] / 2;
                    yDrag[j] = y[j] / 2;
                }

            });

            _model.addToInitialization(function () {
                _initializeSolvers();
            });

            _model.addToEvolution(function () {
                if (!__pagesEnabled['Evol Page']) return;
                _ODEi_evolution1.step();
            })

            _model.addToFixedRelations(function () {
                _isPaused = _model.isPaused();
                _isPlaying = _model.isPlaying();
            });

            _model.addToFixedRelations(function () {
                if (!__pagesEnabled['FixRel Page']) return;
                for (var j = 0; j < 2; j++) {
                    x[j] = Math.cos(phi[j]);
                    y[j] = Math.sin(phi[j]);
                    xDrag[j] = x[j] / 2;
                    yDrag[j] = y[j] / 2;
                }

            });

            _model.addToFixedRelations(function () {
                _isPaused = _model.isPaused();
                _isPlaying = _model.isPlaying();
            });

            function _initializeSolvers() {
                for (var i = 0, n = _privateOdesList.length; i < n; i++) _privateOdesList[i].initializeSolver();
            }

            _model.resetSolvers = function () {
                for (var i = 0, n = _privateOdesList.length; i < n; i++) _privateOdesList[i].resetSolver();
            }

            _getODE = function (_odeName) {
                if (_odeName === 'Evol Page') return _ODEi_evolution1;
                return null;
            }

            function _getEngineSolverClass(classname) {
                classname = classname.toLowerCase();
                if (classname.indexOf('rungekuttafehlberg') >= 0) return EJSS_ODE_SOLVERS.cashKarp45;
                if (classname.indexOf('cash') >= 0) return EJSS_ODE_SOLVERS.cashKarp45;
                if (classname.indexOf('boga') >= 0) return EJSS_ODE_SOLVERS.bogackiShampine23;
                if (classname.indexOf('dopri5') >= 0) return EJSS_ODE_SOLVERS.doPri5;
                if (classname.indexOf('dopri8') >= 0) return EJSS_ODE_SOLVERS.doPri853;
                if (classname.indexOf('richa') >= 0) return EJSS_ODE_SOLVERS.eulerRichardson;
                if (classname.indexOf('euler') >= 0) return EJSS_ODE_SOLVERS.euler;
                if (classname.indexOf('fehlberg78') >= 0) return EJSS_ODE_SOLVERS.fehlberg78;
                if (classname.indexOf('fehlberg8') >= 0) return EJSS_ODE_SOLVERS.fehlberg8;
                if (classname.indexOf('runge') >= 0) return EJSS_ODE_SOLVERS.rungeKutta4;
                if (classname.indexOf('verlet') >= 0) return EJSS_ODE_SOLVERS.velocityVerlet;
                return EJSS_ODE_SOLVERS.rungeKutta4;
            }

            function _ODE_evolution1() {
                var __odeSelf = {};
                var __eventSolver;
                var __solverClass = _getEngineSolverClass('RungeKuttaFehlberg');
                var __state = [];
                var __ignoreErrors = false;
                var __mustInitialize = true;
                var __isEnabled = true;
                var __mustUserReinitialize = false;
                var __mustReinitialize = true;

                var _phiLength;
                var _omegaLength;

                __odeSelf._getOdeVars = function () {
                    return ['phi', 'omega', 't'];
                }

                __odeSelf.setSolverClass = function (__aSolverClass) {
                    __solverClass = __aSolverClass;
                    __instantiateSolver();
                }

                function __instantiateSolver() {
                    __state = [];
                    _phiLength = phi.length;
                    _omegaLength = omega.length;
                    __pushState();
                    __eventSolver = EJSS_ODE_SOLVERS.interpolatorEventSolver(__solverClass(), __odeSelf);
                    __mustInitialize = true;
                }

                __odeSelf.setEnabled = function (_enabled) {
                    __isEnabled = _enabled;
                }

                __odeSelf.getIndependentVariableValue = function () {
                    return __eventSolver.getIndependentVariableValue();
                }

                __odeSelf.getInternalStepSize = function () {
                    return __eventSolver.getInternalStepSize();
                }

                __odeSelf.isAccelerationIndependentOfVelocity = function () {
                    return false;
                }

                __odeSelf.initializeSolver = function () {
                    if (__arraysChanged()) {
                        __instantiateSolver();
                        __odeSelf.initializeSolver();
                        return;
                    }
                    __pushState();
                    __eventSolver.initialize(0.05);
                    __eventSolver.setBestInterpolation(false);
                    __eventSolver.setMaximumInternalSteps(10000);
                    __eventSolver.removeAllEvents();
                    for (k in _userEvents1) {
                        __eventSolver.addEvent(_userEvents1[k]);
                    }
                    __eventSolver.setEstimateFirstStep(false);
                    __eventSolver.setEnableExceptions(false);
                    __eventSolver.setTolerances(0.00001, 0.00001);
                    __mustReinitialize = true;
                    __mustInitialize = false;
                }

                function __pushState() {
                    var __j = 0;
                    var __n = 0;
                    var __cIn = 0;
                    if (!__mustReinitialize)
                        for (__j = 0, __n = __cIn; __j < _phiLength; __j++)
                            if (__state[__n++] !== phi[__j] || __state[__n++] !== omega[__j]) {
                                __mustReinitialize = true;
                                break;
                            }
                    for (__j = 0; __j < _phiLength; __j++) {
                        __state[__cIn++] = phi[__j];
                        __state[__cIn++] = omega[__j];
                    }
                    if (__state[__cIn] !== t) __mustReinitialize = true;
                    __state[__cIn++] = t;
                }

                function __arraysChanged() {
                    if (_phiLength !== phi.length) return true;
                    if (_omegaLength !== omega.length) return true;
                    return false;
                }

                __odeSelf.getEventSolver = function () {
                    return __eventSolver;
                }

                __odeSelf.resetSolver = function () {
                    __mustUserReinitialize = true;
                }

                __odeSelf.automaticResetSolver = function () {
                    __mustReinitialize = true;
                }

                function __errorAction() {
                    if (__ignoreErrors) return;
                    console.log(__eventSolver.getErrorMessage());
                    if (window.confirm('Numerical solver error. Continue the simulation?')) __ignoreErrors = true;
                    else _pause();
                    __mustReinitialize = true;
                }

                __odeSelf.step = function () {
                    return __privateStep(false);
                }

                __odeSelf.solverStep = function () {
                    return __privateStep(true);
                }

                function __privateStep(__takeMaximumStep) {
                    if (!__isEnabled) return 0;
                    if (0.05 === 0) return 0;
                    if (__mustInitialize) __odeSelf.initializeSolver();
                    if (__arraysChanged()) {
                        __instantiateSolver();
                        __odeSelf.initializeSolver();
                    }
                    __eventSolver.setStepSize(0.05);
                    __eventSolver.setInternalStepSize(0.05);
                    __eventSolver.setMaximumInternalSteps(10000);
                    __eventSolver.setTolerances(0.00001, 0.00001);
                    __pushState();
                    if (__mustUserReinitialize) {
                        __eventSolver.userReinitialize();
                        __mustUserReinitialize = false;
                        __mustReinitialize = false;
                        if (__eventSolver.getErrorCode() !== EJSS_ODE_SOLVERS.ERROR.NO_ERROR) __errorAction();
                    } else if (__mustReinitialize) {
                        __eventSolver.reinitialize();
                        __mustReinitialize = false;
                        if (__eventSolver.getErrorCode() !== EJSS_ODE_SOLVERS.ERROR.NO_ERROR) __errorAction();
                    }
                    var __stepTaken = __takeMaximumStep ? __eventSolver.maxStep() : __eventSolver.step();
                    var __i = 0;
                    var __cOut = 0;
                    for (__i = 0; __i < _phiLength; __i++) {
                        phi[__i] = __state[__cOut++];
                        omega[__i] = __state[__cOut++];
                    }
                    t = __state[__cOut++];
                    if (__eventSolver.getErrorCode() !== EJSS_ODE_SOLVERS.ERROR.NO_ERROR) __errorAction();
                    return __stepTaken;
                }

                __odeSelf.getState = function () {
                    return __state;
                }

                __odeSelf.getRate = function (_aState, _aRate) {
                    _aRate[_aRate.length - 1] = 0.0;
                    var __i = 0;
                    var __cOut = 0;
                    var phi = [];
                    var omega = [];
                    for (__i = 0; __i < _phiLength; __i++) {
                        phi[__i] = _aState[__cOut++];
                        omega[__i] = _aState[__cOut++];
                    }
                    var t = _aState[__cOut++];
                    var sinDiff = Math.sin(phi[1] - phi[0]);
                    var cosDiff = Math.cos(phi[1] - phi[0]);
                    var q2 = qRed * qGreen;
                    var k = q2 * 9e-3 / 0.017;
                    for (var j = 0; j < 2; j++) {
                        acc[j] = -k * Math.pow(-1, j) * sinDiff / Math.pow(1 - cosDiff, 1.5) - 9.8 * Math.cos(phi[j]);
                    }
                    /*
                    Сила Кулона (F=kq^2/r^2)
                    Дополнительное угловое ускорение (k*q^2/m*r^3)*sin(angle)/(2-2*cos(angle))^(3/2)
                    */
                    var __cRate = 0;
                    var i;
                    for (i = 0; i < _phiLength; i++) {
                        _aRate[__cRate++] = Array.isArray(omega[i]) ? omega[i][i] : omega[i];
                        _aRate[__cRate++] = Array.isArray(acc[i]) ? acc[i][i] : acc[i];
                    }
                    _aRate[__cRate++] = 1;
                    return _aRate;
                }


                __odeSelf._addEvent = function (userCondition, userAction, eventType, eventMethod, maxIter, eventTolerance, endAtEvent) {

                    var __User_Event = function (userCondition, userAction, eventType, eventMethod, maxIter, eventTolerance, endAtEvent) {
                        var _eventSelf = {};
                        _eventSelf.getTypeOfEvent = function () {
                            return eventType;
                        }
                        _eventSelf.getRootFindingMethod = function () {
                            return eventMethod;
                        }
                        _eventSelf.getMaxIterations = function () {
                            return maxIter;
                        }
                        _eventSelf.getTolerance = function () {
                            return eventTolerance;
                        }

                        _eventSelf.evaluate = function (_aState) {
                            var __i = 0;
                            var __cOut = 0;
                            var phi = [];
                            var omega = [];
                            for (__i = 0; __i < _phiLength; __i++) {
                                phi[__i] = _aState[__cOut++];
                                omega[__i] = _aState[__cOut++];
                            }
                            var t = _aState[__cOut++];
                            return eval(userCondition);
                        }

                        _eventSelf.action = function () {
                            var __i = 0;
                            var __cOut = 0;
                            for (__i = 0; __i < _phiLength; __i++) {
                                phi[__i] = __state[__cOut++];
                                omega[__i] = __state[__cOut++];
                            }
                            t = __state[__cOut++];
                            var _returnValue = __userDefinedAction();
                            var __j = 0;
                            var __cIn = 0;
                            for (__j = 0; __j < _phiLength; __j++) {
                                __state[__cIn++] = phi[__j];
                                __state[__cIn++] = omega[__j];
                            }
                            __state[__cIn++] = t;
                            return _returnValue;
                        }

                        function __userDefinedAction() {
                            if (undefined != functions) eval(functions.toString());
                            eval(userAction);
                            return endAtEvent;
                        }

                        return _eventSelf;
                    }
                    _userEvents1.push(__User_Event(userCondition, userAction, eventType, eventMethod, maxIter, eventTolerance, endAtEvent));
                }

                __instantiateSolver();
                return __odeSelf;
            }

            _model._fontResized = function (iBase, iSize, iDelta) {
                _view._fontResized(iBase, iSize, iDelta);
            };

            function _createView() {
                _view = new _simulationView(_topFrame, _libraryPath, _codebasePath);
                var _view_super_reset = _view._reset;
                _view._reset = function () {
                    _view_super_reset();
                    _view.executionPanel.linkProperty('Font', function () {
                        return font;
                    }, function (_v) {
                        font = _v;
                    });
                    _view.gCharge.linkProperty('Value', function () {
                        return qGreen;
                    }, function (_v) {
                        qGreen = _v;
                    });
                    _view.greenslider.linkProperty('Value', function () {
                        return qGreen;
                    }, function (_v) {
                        qGreen = _v;
                    });
                    _view.greenslider.linkProperty('Font', function () {
                        return font;
                    }, function (_v) {
                        font = _v;
                    });
                    _view.gCharge2.linkProperty('Value', function () {
                        return qRed;
                    }, function (_v) {
                        qRed = _v;
                    });
                    _view.redslider.linkProperty('Value', function () {
                        return qRed;
                    }, function (_v) {
                        qRed = _v;
                    });
                    _view.redslider.linkProperty('Font', function () {
                        return font;
                    }, function (_v) {
                        font = _v;
                    });
                    _view.playPauseButton.setAction('OffClick', _pause);
                    _view.playPauseButton.linkProperty('State', function () {
                        return _isPaused;
                    });
                    _view.playPauseButton.setAction('OnClick', _play);
                    _view.resetButton.setAction('OnClick', _reset);
                    _view.plottingPanel.setAction('OnDoubleClick', function (_data, _info) {
                        toggleFullScreen();
                    });
                    _view.chargeSet.linkProperty('FillColor', function () {
                        return color;
                    }, function (_v) {
                        color = _v;
                    });
                    _view.chargeSet.linkProperty('X', function () {
                        return x;
                    }, function (_v) {
                        x = _v;
                    });
                    _view.chargeSet.linkProperty('Y', function () {
                        return y;
                    }, function (_v) {
                        y = _v;
                    });
                    _view.supportset.linkProperty('SizeX', function () {
                        return x;
                    }, function (_v) {
                        x = _v;
                    });
                    _view.supportset.linkProperty('LineColor', function () {
                        return color;
                    }, function (_v) {
                        color = _v;
                    });
                    _view.supportset.linkProperty('SizeY', function () {
                        return y;
                    }, function (_v) {
                        y = _v;
                    });
                    _view.dragParticleSet.linkProperty('X', function () {
                        return xDrag;
                    }, function (_v) {
                        xDrag = _v;
                    });
                    _view.dragParticleSet.linkProperty('Y', function () {
                        return yDrag;
                    }, function (_v) {
                        yDrag = _v;
                    });
                    _view.dragParticleSet.linkProperty('Visibility', function () {
                        return _isPaused;
                    });
                    _view.dragParticleSet.setAction('OnDrag', function (_data, _info) {
                        newPosition()
                    });
                    _view.dragtext.linkProperty('Visibility', function () {
                        return _isPaused;
                    });
                    _view.dragtextset.linkProperty('X', function () {
                        return xDrag;
                    }, function (_v) {
                        xDrag = _v;
                    });
                    _view.dragtextset.linkProperty('Y', function () {
                        return yDrag;
                    }, function (_v) {
                        yDrag = _v;
                    });
                };

                _model.setView(_view);
                _model.reset();
                _view._enableEPub();
            }

            _model.setAutoplay(true);
            _model.setFPS(25);
            _model.setStepsPerDisplay(1);
            _createView();
            return _model;
        }

        function _simulationView(_topFrame, _libraryPath, _codebasePath) {
            var _view = EJSS_CORE.createView(_topFrame);

            if (_libraryPath) _view._setLibraryPath(_libraryPath);
            if (_codebasePath) _view._setResourcePath(_codebasePath);

            _view._addDescriptionPage("Intro Page", "_description_0.html");

            _view._reset = function () {
                _view._clearAll();
                _view._addElement(EJSS_INTERFACE.panel, 'executionPanel', _view._topFrame)
                    .setProperty("CSS", {"float": "left"})
                    .setProperty("Display", "inline-flex")
                ;
                _view._addElement(EJSS_INTERFACE.imageAndTextButton, 'gcharge', _view.executionPanel)
                    .setProperty("Background", "LightGray")
                    .setProperty("Text", "q1 =  ")
                    .setProperty("Font", "normal normal large Geneva, Verdana, sans-serif")
                ;
                _view._addElement(EJSS_INTERFACE.numberField, 'gCharge', _view.executionPanel)
                    .setProperty("Width", "10vw")
                    .setProperty("Format", "0.0")
                    .setProperty("Font", "normal normal large Geneva, Verdana, sans-serif")
                ;
                _view._addElement(EJSS_INTERFACE.slider, 'greenslider', _view.executionPanel)
                    .setProperty("Width", "15vw")
                    .setProperty("Minimum", 1)
                    .setProperty("Maximum", 4)
                    .setProperty("ShowText", false)
                    .setProperty("Format", "0.0")
                    .setProperty("Background", "LightGray")
                    .setProperty("Tooltip", "Green charge")
                    .setProperty("Foreground", "white")
                    .setProperty("Step", 1)
                ;
                _view._addElement(EJSS_INTERFACE.imageAndTextButton, 'gcharge2', _view.executionPanel)
                    .setProperty("Background", "LightGray")
                    .setProperty("Text", "q2 = ")
                    .setProperty("Font", "normal normal large Geneva, Verdana, sans-serif")
                ;
                _view._addElement(EJSS_INTERFACE.numberField, 'gCharge2', _view.executionPanel)
                    .setProperty("Width", "10vw")
                    .setProperty("Format", "0.0")
                    .setProperty("Font", "normal normal large Geneva, Verdana, sans-serif")
                ;
                _view._addElement(EJSS_INTERFACE.slider, 'redslider', _view.executionPanel)
                    .setProperty("Width", "15vw")
                    .setProperty("Minimum", 1)
                    .setProperty("Maximum", 4)
                    .setProperty("ShowText", false)
                    .setProperty("Format", "0.0")
                    .setProperty("Background", "LightGray")
                    .setProperty("Tooltip", "Red charge")
                    .setProperty("Foreground", "white")
                    .setProperty("Step", 1)
                ;
                _view._addElement(EJSS_INTERFACE.twoStateButton, 'playPauseButton', _view.executionPanel)
                    .setProperty("TextOn", "▶")
                    .setProperty("Tooltip", "Play/Pause")
                    .setProperty("TextOff", "❚❚")
                    .setProperty("Background", "#a25dec")
                ;
                _view._addElement(EJSS_INTERFACE.button, 'resetButton', _view.executionPanel)
                    .setProperty("Text", "↻")
                    .setProperty("Background", "#a25dec")
                ;
                _view._addElement(EJSS_INTERFACE.panel, 'panel', _view._topFrame);
                _view._addElement(EJSS_DRAWING2D.plottingPanel, 'plottingPanel', _view.panel)
                    .setProperty("Height", "100vh")
                    .setProperty("Width", "100%")
                    .setProperty("Gutters", [0, 0, 0, 0])
                    .setProperty("YScalePrecision", 0)
                    .setProperty("XFixedTick", 0)
                    .setProperty("Enabled", true)
                    .setProperty("SquareAspect", true)
                    .setProperty("MaximumY", 1)
                    .setProperty("MaximumX", 1)
                    .setProperty("YFixedTick", 0)
                    .setProperty("YAutoTicks", false)
                    .setProperty("MinimumX", -1)
                    .setProperty("XTickStep", 0.5)
                    .setProperty("MinimumY", -1.5)
                    .setProperty("YTickStep", 1)
                    .setProperty("AutoScaleY", false)
                    .setProperty("AutoScaleX", false)
                    .setProperty("XAutoTicks", false)
                    .setProperty("XScalePrecision", 0)
                ;
                _view._addElement(EJSS_DRAWING2D.group, 'axisgroup', _view.plottingPanel);
                _view._addElement(EJSS_DRAWING2D.segment, 'xAxis', _view.axisgroup)
                    .setProperty("SizeX", 6)
                    .setProperty("X", -3)
                    .setProperty("LineColor", "#0080ff")
                    .setProperty("Y", 0)
                    .setProperty("SizeY", 0)
                    .setProperty("LineWidth", 2)
                ;
                _view._addElement(EJSS_DRAWING2D.segment, 'yAxis', _view.axisgroup)
                    .setProperty("SizeX", 0)
                    .setProperty("X", 0)
                    .setProperty("LineColor", "#0080ff")
                    .setProperty("Y", -1.5)
                    .setProperty("SizeY", 3)
                    .setProperty("LineWidth", 2)
                ;
                _view._addElement(EJSS_DRAWING2D.shape, 'supportPoint', _view.plottingPanel)
                    .setProperty("FillColor", "#0080ff")
                    .setProperty("SizeX", 0.05)
                    .setProperty("X", 0)
                    .setProperty("Y", 0)
                    .setProperty("SizeY", 0.05)
                ;
                _view._addElement(EJSS_DRAWING2D.shapeSet, 'chargeSet', _view.plottingPanel)
                    .setProperty("NumberOfElements", 2)
                    .setProperty("EnabledPosition", "ENABLED_ANY")
                ;
                _view._addElement(EJSS_DRAWING2D.segmentSet, 'supportset', _view.plottingPanel)
                    .setProperty("NumberOfElements", 2)
                    .setProperty("X", 0)
                    .setProperty("Y", 0)
                    .setProperty("LineWidth", 2)
                ;
                _view._addElement(EJSS_DRAWING2D.shapeSet, 'dragParticleSet', _view.plottingPanel)
                    .setProperty("NumberOfElements", 2)
                    .setProperty("FillColor", "gray")
                    .setProperty("SizeX", 0.05)
                    .setProperty("ShapeType", "RECTANGLE")
                    .setProperty("LineColor", "gray")
                    .setProperty("SizeY", 0.05)
                    .setProperty("DrawFill", false)
                    .setProperty("EnabledPosition", "ENABLED_ANY")
                ;
                _view._addElement(EJSS_DRAWING2D.group, 'dragtext', _view.plottingPanel)
                    .setProperty("Y", 0.1)
                ;
                _view._addElement(EJSS_DRAWING2D.textSet, 'dragtextset', _view.dragtext)
                    .setProperty("NumberOfElements", 2)
                    .setProperty("Text", "↔️")
                    .setProperty("FontSize", "10pt")
                ;
                _view._addElement(EJSS_INTERFACE.panel, 'html', _view._topFrame);
            };
            return _view;
        }

    </script>
    <title></title>

</head>
<body>
<div role="button" id="_topFrame" style="text-align:center"></div>
<div id='metadata' class='metadata'>
    <br/>
    <p></p>

</div>
<script type="text/javascript">

    var _model;
    window.addEventListener('load',
        function () {
            _model = new _simulation("_topFrame", "./_ejs_library/", null);

            if (typeof _isApp !== "undefined" && _isApp) _model.setRunAlways(true);
            TextResizeDetector.TARGET_ELEMENT_ID = '_topFrame';
            TextResizeDetector.USER_INIT_FUNC = function () {
                var iBase = TextResizeDetector.addEventListener(function (e, args) {
                    _model._fontResized(args[0].iBase, args[0].iSize, args[0].iDelta);
                }, null);
                _model._fontResized(iBase);
            };
            _model.onload();
        }, false);
</script>
</body>
</html>